CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

PROJECT( Orthoklampt )
set(ORTHOKLAMPT_MAJOR_VERSION 0)
set(ORTHOKLAMPT_MINOR_VERSION 6)
set(ORTHOKLAMPT_PATCH_VERSION 2)
set(ORTHOKLAMPT_VERSION ${ORTHOKLAMPT_MAJOR_VERSION}.${ORTHOKLAMPT_MINOR_VERSION}.${ORTHOKLAMPT_PATCH_VERSION})
MESSAGE("${CMAKE_MODULE_PATH}")
LIST(APPEND CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/CMakeModules")
MESSAGE("${CMAKE_MODULE_PATH}")
INCLUDE(CMakeColors)


set(CMAKE_CXX_COMPILER "g++-5")

SET(KLAMPT_ROOT /home/aorthey/git/Klampt/)
SET (CMAKE_MODULE_PATH "${KLAMPT_ROOT}/CMakeModules")
FIND_PACKAGE(Klampt REQUIRED) 
ADD_DEFINITIONS(${KLAMPT_DEFINITIONS})
INCLUDE_DIRECTORIES(${KLAMPT_INCLUDE_DIRS})

INCLUDE_DIRECTORIES(src/)
FILE(GLOB ORTHOKLAMPT_SOURCES src/*.cpp)
FILE(GLOB EXECUTABLES_SOURCES test/*.cpp)

SET(EXECUTABLES 
  ${EXECUTABLES_SOURCES}
  main.cpp
)

MESSAGE("-------------------------------------")
MESSAGE(COLOR_WHITE "BUILDING EXECUTABLES")
MESSAGE("-------------------------------------")
FOREACH(FILENAME ${EXECUTABLES})
  GET_FILENAME_COMPONENT( EXECUTABLE ${FILENAME} NAME_WE)
  MESSAGE(COLOR_WHITE "-- ${EXECUTABLE}")
  ADD_EXECUTABLE( ${EXECUTABLE} ${FILENAME} ${ORTHOKLAMPT_SOURCES})
  FIND_PACKAGE(OMPL)
  TARGET_LINK_LIBRARIES(${EXECUTABLE} ${ORTHOKLAMPT} ${KLAMPT_LIBRARIES} ${OMPL_LIBRARIES})
ENDFOREACH(FILENAME)
MESSAGE("-------------------------------------")

SET( CMAKE_CXX_FLAGS  "${CMAKE_CXX_FLAGS} -std=c++11 -g -Wall" )
